# NTP configuration template
# Generated by Ansible for {{ inventory_hostname }}

# Use pool servers for better reliability
{% for server in ntp_servers | default(['0.pool.ntp.org', '1.pool.ntp.org', '2.pool.ntp.org', '3.pool.ntp.org']) %}
server {{ server }} iburst
{% endfor %}

# Drift file location
driftfile /var/lib/ntp/ntp.drift

# Logging
logfile /var/log/ntp.log

# Statistics
statsdir /var/log/ntpstats/
statistics loopstats peerstats clockstats
filegen loopstats file loopstats type day enable
filegen peerstats file peerstats type day enable
filegen clockstats file clockstats type day enable

# Access control
restrict -4 default kod notrap nomodify nopeer noquery limited
restrict -6 default kod notrap nomodify nopeer noquery limited
restrict 127.0.0.1
restrict ::1

# Leap second handling
leapfile /usr/share/zoneinfo/leap-seconds.list
